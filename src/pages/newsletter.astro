---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/starwind/accordion";

const glossaryEntries = await getCollection("glossary");
const totalTerms = glossaryEntries.length;
const categories = [
  ...new Set(glossaryEntries.map((entry) => entry.data.category)),
];

const sevenDaysAgo = new Date();
sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);
// const recentEntries = glossaryEntries.filter(
//   (entry) => entry.data.lastUpdated && entry.data.lastUpdated >= sevenDaysAgo
// );
---

<BaseLayout
  title="Newsletter - ‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏≤‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• | TechGloss"
  description="‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏±‡∏ö Newsletter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏à‡∏≤‡∏Å TechGloss ‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏∞‡∏î‡∏ß‡∏Å"
  type="website"
>
  <div class="container-narrow">
    <!-- Header -->
    <header class="text-center mb-12">
      <div class="flex items-center justify-center mb-6">
        <div
          class="w-16 h-16 bg-gradient-green rounded-2xl flex items-center justify-center shadow-green-lg"
        >
          <span class="text-3xl">üìß</span>
        </div>
      </div>
      <h1 class="text-display text-gradient-green mb-6">Newsletter</h1>
      <p
        class="text-body-large text-muted-foreground max-w-2xl mx-auto leading-relaxed"
      >
        ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á‡∏ñ‡∏∂‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏∞‡∏î‡∏ß‡∏Å
        ‡πÑ‡∏°‡πà‡∏û‡∏•‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÉ‡∏´‡∏°‡πà
      </p>
    </header>

    <!-- Signup Form -->
    <section class="mb-12">
      <div class="max-w-md mx-auto">
        <div class="bg-card border border-border rounded-2xl p-8 shadow-lg">
          <div class="text-center mb-6">
            <h2 class="text-heading-2 mb-3">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏±‡∏ö Newsletter</h2>
            <p class="text-muted-foreground">
              ‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå
            </p>
          </div>
          <form id="newsletter-form" class="space-y-4">
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-foreground mb-2"
                >‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</label
              >
              <input
                type="email"
                id="email"
                name="email"
                required
                placeholder="your@email.com"
                class="w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary bg-background"
              />
            </div>
            <label class="flex items-center space-x-3">
              <input
                type="checkbox"
                id="agree"
                name="agree"
                required
                class="w-4 h-4 text-primary border-border rounded focus:ring-primary"
              />
              <span class="text-sm text-muted-foreground"
                >‡∏â‡∏±‡∏ô‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ TechGloss ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏• Newsletter
                ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤</span
              >
            </label>
            <button
              type="submit"
              class="w-full btn-primary py-3 text-lg font-medium"
              id="submit-btn"
            >
              üìß ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏±‡∏ö Newsletter
            </button>
          </form>

          <!-- Messages -->
          <div
            id="success-message"
            class="hidden mt-4 p-4 bg-green-50 border border-green-200 rounded-lg"
          >
            <div class="flex items-center">
              <span class="text-green-600 mr-2">‚úÖ</span>
              <p class="text-green-800 font-medium">
                ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
              </p>
            </div>
          </div>
          <div
            id="error-message"
            class="hidden mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"
          >
            <div class="flex items-center">
              <span class="text-red-600 mr-2">‚ùå</span>
              <p class="text-red-800 font-medium">
                ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- What You'll Get -->
    <section class="mb-12">
      <h2 class="text-heading-2 text-center mb-8">‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£?</h2>
      <div class="grid gap-6 md:grid-cols-3">
        {
          [
            {
              icon: "üìö",
              title: "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà",
              desc: "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏±‡πâ‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢",
            },
            {
              icon: "üí°",
              title: "‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö",
              desc: "‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á",
            },
            {
              icon: "üîó",
              title: "‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á",
              desc: "‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡πÅ‡∏´‡∏•‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à",
            },
          ].map((item) => (
            <div class="text-center p-6 bg-card border border-border rounded-xl">
              <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                <span class="text-2xl">{item.icon}</span>
              </div>
              <h3 class="text-heading-4 mb-2">{item.title}</h3>
              <p class="text-muted-foreground text-sm">{item.desc}</p>
            </div>
          ))
        }
      </div>
    </section>

    <!-- Preview -->
    <section class="mb-12">
      <h2 class="text-heading-2 text-center mb-8">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Newsletter</h2>
      <div class="max-w-2xl mx-auto">
        <div class="bg-muted/30 border border-border rounded-xl p-6">
          <div class="bg-white rounded-lg p-6 shadow-sm">
            <div class="border-b border-gray-200 pb-4 mb-6">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div
                    class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center mr-3"
                  >
                    <span class="text-white text-sm">üåø</span>
                  </div>
                  <div>
                    <h3 class="font-bold text-gray-900">TechGloss Weekly</h3>
                    <p class="text-sm text-gray-600">
                      ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1, ‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏° 2024
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="space-y-4">
              <div>
                <h4 class="font-semibold text-gray-900 mb-2">
                  üÜï ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ
                </h4>
                <div class="bg-gray-50 rounded-lg p-4">
                  <h5 class="font-medium text-gray-900">Promise</h5>
                  <p class="text-sm text-gray-600 mt-1">
                    Object ‡πÉ‡∏ô JavaScript ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö asynchronous
                    operations...
                  </p>
                  <span
                    class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full mt-2"
                    >JavaScript</span
                  >
                </div>
              </div>
              <div>
                <h4 class="font-semibold text-gray-900 mb-2">
                  üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ
                </h4>
                <p class="text-sm text-gray-600">
                  ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Promise.all() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠ async operations
                  ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô...
                </p>
              </div>
              <div class="border-t border-gray-200 pt-4">
                <p class="text-xs text-gray-500 text-center">
                  ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î {totalTerms} ‡∏Ñ‡∏≥ ‡πÉ‡∏ô {categories.length} ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="mb-12">
      <h2 class="text-heading-2 text-center mb-8">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢</h2>
      <div class="max-w-2xl mx-auto">
        <Accordion class="bg-card border border-border rounded-lg">
          <AccordionItem value="frequency">
            <AccordionTrigger>Newsletter ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ö‡πà‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?</AccordionTrigger>
            <AccordionContent>
              ‡πÄ‡∏£‡∏≤‡∏™‡πà‡∏á Newsletter ‡∏ó‡∏∏‡∏Å‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå
              ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡πÉ‡∏ô‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏±‡πâ‡∏ô
            </AccordionContent>
          </AccordionItem>
          <AccordionItem value="unsubscribe">
            <AccordionTrigger>‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°</AccordionTrigger>
            <AccordionContent>
              ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå "Unsubscribe" ‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÑ‡∏õ
              ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤
            </AccordionContent>
          </AccordionItem>
          <AccordionItem value="privacy">
            <AccordionTrigger>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÑ‡∏´‡∏°?</AccordionTrigger>
            <AccordionContent>
              ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á Newsletter ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
              ‡πÑ‡∏°‡πà‡πÅ‡∏ä‡∏£‡πå‡πÉ‡∏´‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏° ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
            </AccordionContent>
          </AccordionItem>
          <AccordionItem value="spam">
            <AccordionTrigger>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏™‡πÅ‡∏õ‡∏°‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?</AccordionTrigger>
            <AccordionContent>
              ‡πÉ‡∏ä‡πà‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏£‡∏≤‡∏™‡πà‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Newsletter ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
              ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
            </AccordionContent>
          </AccordionItem>
        </Accordion>
      </div>
    </section>

    <!-- Alternative Options -->
    <section>
      <h2 class="text-heading-2 text-center mb-8">‡∏ß‡∏¥‡∏ò‡∏µ‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</h2>
      <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        {
          [
            {
              href: "/",
              icon: "üîñ",
              title: "Bookmark",
              desc: "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô Bookmark ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞",
            },
            {
              href: "/rss.xml",
              icon: "üì°",
              title: "RSS Feed",
              desc: "‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ RSS Reader",
              target: "_blank",
            },
            {
              href: "#",
              icon: "üîî",
              title: "Push Notifications",
              desc: "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå",
              onclick: "subscribeToNotifications()",
            },
            {
              href: "https://twitter.com/techgloss",
              icon: "üê¶",
              title: "Social Media",
              desc: "‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÉ‡∏ô Twitter/X",
              target: "_blank",
            },
          ].map((item) => (
            <a
              href={item.href}
              onclick={item.onclick}
              target={item.target}
              class="block p-4 bg-card border border-border rounded-lg hover:shadow-md transition-all text-center"
            >
              <span class="text-2xl mb-2 block">{item.icon}</span>
              <h3 class="font-medium mb-1">{item.title}</h3>
              <p class="text-xs text-muted-foreground">{item.desc}</p>
            </a>
          ))
        }
      </div>
    </section>
  </div>
</BaseLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById(
      "newsletter-form"
    ) as HTMLFormElement | null;
    const btn = document.getElementById(
      "submit-btn"
    ) as HTMLButtonElement | null;
    const success = document.getElementById(
      "success-message"
    ) as HTMLElement | null;
    const error = document.getElementById(
      "error-message"
    ) as HTMLElement | null;

    if (!form || !btn || !success || !error) return;

    const showMessage = (el: HTMLElement, text: string): void => {
      const p = el.querySelector("p");
      if (p) {
        p.textContent = text;
      }
      el.classList.remove("hidden");
      setTimeout(
        () => el.classList.add("hidden"),
        el === success ? 8000 : 5000
      );
    };

    const showSuccess = (msg: string): void => {
      showMessage(success, msg);
      error.classList.add("hidden");
    };

    const showError = (msg: string): void => {
      showMessage(error, msg);
      success.classList.add("hidden");
    };

    form.addEventListener("submit", async (e: SubmitEvent) => {
      e.preventDefault();
      const formData = new FormData(form);
      const email = formData.get("email") as string;
      const agree = formData.get("agree") as string;

      if (!email || !agree) return showError("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô");

      btn.disabled = true;
      btn.textContent = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£...";

      try {
        const res = await fetch("/api/newsletter", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, agree: !!agree }),
        });
        const data = await res.json();
        data.success ? showSuccess(data.message) : showError(data.message);
        form.reset();
      } catch {
        showError("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á");
      } finally {
        btn.disabled = false;
        btn.textContent = "üìß ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏£‡∏±‡∏ö Newsletter";
      }
    });
  });

  // Global function for onclick handler
  (window as any).subscribeToNotifications = async function () {
    if (!("Notification" in window))
      return alert("‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô");
    if (Notification.permission === "granted")
      return alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß!");
    if (Notification.permission !== "denied") {
      const permission = await Notification.requestPermission();
      if (permission === "granted") {
        new Notification("TechGloss", {
          body: "‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÉ‡∏´‡∏°‡πà",
          icon: "/favicon.svg",
        });
      }
    } else {
      alert("‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå");
    }
  };
</script>

<style>
  input:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.1);
  }
</style>
